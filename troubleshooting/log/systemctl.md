æŒæ¡ `systemctl` å‘½ä»¤æ˜¯é«˜æ•ˆç®¡ç† Linux æœåŠ¡çš„æ ¸å¿ƒæŠ€èƒ½ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹æœåŠ¡å‘ç°ã€é…ç½®æ–‡ä»¶å®šä½ã€æ—¥å¿—æŸ¥çœ‹ç­‰åœºæ™¯çš„ç³»ç»ŸåŒ–å‘½ä»¤é›†æ•´ç†ï¼ŒåŸºäº **RHEL/CentOS 7+** ç¯å¢ƒï¼ˆé€‚é… `systemd` æ¶æ„ï¼‰ï¼š

------

### ğŸ” **ä¸€ã€æœåŠ¡å‘ç°ä¸æŸ¥è¯¢**

#### ğŸ“Œ 1. **åˆ—å‡ºæ‰€æœ‰æœåŠ¡**

- **åˆ—å‡ºå·²åŠ è½½çš„æœåŠ¡**ï¼ˆå«çŠ¶æ€ï¼‰26ï¼š

  ```
  systemctl list-units --type=service          # ä»…æ´»è·ƒæœåŠ¡
  systemctl list-units --type=service --all    # åŒ…å«éæ´»è·ƒæœåŠ¡
  ```

- **åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„æœåŠ¡å•å…ƒ**ï¼ˆå«å¯ç”¨çŠ¶æ€ï¼‰6ï¼š

  ```
  systemctl list-unit-files --type=service
  ```

#### ğŸ” 2. **æŒ‰åç§°è¿‡æ»¤æœåŠ¡**

- ä½¿ç”¨ `grep` å¿«é€ŸæŸ¥æ‰¾ç‰¹å®šæœåŠ¡åï¼š

  ```
  systemctl list-units --type=service --all | grep nginx   # æŒ‰å…³é”®è¯è¿‡æ»¤
  systemctl list-unit-files 'nginx*'                      # é€šé…ç¬¦åŒ¹é…:cite[10]
  ```

#### âš ï¸ 3. **æ£€æŸ¥å¤±è´¥çš„æœåŠ¡**

```
systemctl --failed    # æ˜¾ç¤ºå¯åŠ¨å¤±è´¥çš„æœåŠ¡:cite[1]
```

------

### ğŸ“‚ **äºŒã€é…ç½®æ–‡ä»¶å®šä½**

#### ğŸ“ 1. **æŸ¥çœ‹æœåŠ¡é…ç½®æ–‡ä»¶è·¯å¾„**

- **é»˜è®¤è·¯å¾„**ï¼š

  - ç³»ç»Ÿå®‰è£…çš„æœåŠ¡ï¼š`/usr/lib/systemd/system/*.service`
  - è‡ªå®šä¹‰æˆ–è¦†ç›–é…ç½®ï¼š`/etc/systemd/system/*.service` 37

- **ç›´æ¥æŸ¥çœ‹æœåŠ¡æ–‡ä»¶å†…å®¹**ï¼š

  ```
  systemctl cat nginx.service    # æ˜¾ç¤ºå®Œæ•´é…ç½®ï¼ˆå«è¦†ç›–æ–‡ä»¶ï¼‰:cite[1]
  ```

#### âš™ï¸ 2. **ä¿®æ”¹é…ç½®åçš„æ“ä½œ**

- é‡è½½ `systemd` é…ç½®ï¼ˆä¸é‡å¯æœåŠ¡ï¼‰ï¼š

  ```
  sudo systemctl daemon-reload    # ä¿®æ”¹é…ç½®æ–‡ä»¶åå¿…é¡»æ‰§è¡Œ:cite[1]:cite[3]
  ```

#### ğŸ“‹ **é…ç½®æ–‡ä»¶ä½ç½®é€ŸæŸ¥è¡¨**

| **ç±»å‹**     | **è·¯å¾„**                   | **ä¼˜å…ˆçº§** | **ç”¨é€”**             |
| :----------- | :------------------------- | :--------- | :------------------- |
| ç³»ç»Ÿé»˜è®¤     | `/usr/lib/systemd/system/` | ä½         | RPM åŒ…å®‰è£…çš„æœåŠ¡     |
| è¿è¡Œæ—¶é…ç½®   | `/run/systemd/system/`     | ä¸­         | ä¸´æ—¶è¦†ç›–é…ç½®         |
| ç®¡ç†å‘˜è‡ªå®šä¹‰ | `/etc/systemd/system/`     | é«˜         | ç”¨æˆ·è‡ªå®šä¹‰æˆ–å¯ç”¨æ–‡ä»¶ |

------

### ğŸ“œ **ä¸‰ã€æ—¥å¿—æŸ¥çœ‹ä¸åˆ†æ**

#### ğŸ” 1. **æŸ¥çœ‹æœåŠ¡æ—¥å¿—**

- **åŸºæœ¬å‘½ä»¤**ï¼š

  ```
  journalctl -u nginx.service      # æŸ¥çœ‹æŒ‡å®šæœåŠ¡çš„æ‰€æœ‰æ—¥å¿—:cite[4]:cite[8]
  journalctl -u nginx -f           # å®æ—¶è·Ÿè¸ªæ—¥å¿—è¾“å‡º
  ```

- **æŒ‰æ—¶é—´ç­›é€‰**ï¼š

  ```
  journalctl -u nginx --since "2025-07-01" --until "2025-07-05"
  ```

#### âš ï¸ 2. **è¯Šæ–­å¯åŠ¨å¤±è´¥**

- æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼ˆå«è¿›ç¨‹é€€å‡ºç ï¼‰ï¼š

  ```
  journalctl -u nginx -xe          # æ˜¾ç¤ºæœ€è¿‘é”™è¯¯æ—¥å¿—ï¼ˆæ¨èï¼‰:cite[4]
  systemctl status nginx -l        # æ˜¾ç¤ºå®Œæ•´çŠ¶æ€ï¼ˆæ— åˆ†é¡µï¼‰:cite[1]
  ```

------

### âš™ï¸ **å››ã€æœåŠ¡ç®¡ç†å‘½ä»¤é›†**

| **æ“ä½œ**     | **å‘½ä»¤**                                  | **è¯´æ˜**                   |
| :----------- | :---------------------------------------- | :------------------------- |
| **å¯åœæ§åˆ¶** | `sudo systemctl start/stop/restart nginx` | å¯åŠ¨/åœæ­¢/é‡å¯æœåŠ¡         |
| **å¼€æœºè‡ªå¯** | `sudo systemctl enable/disable nginx`     | å¯ç”¨/ç¦ç”¨å¼€æœºå¯åŠ¨          |
| **çŠ¶æ€æ£€æŸ¥** | `systemctl status nginx`                  | æœåŠ¡è¿è¡ŒçŠ¶æ€ï¼ˆå«æ—¥å¿—ç‰‡æ®µï¼‰ |
| **ä¾èµ–æŸ¥çœ‹** | `systemctl list-dependencies nginx`       | æœåŠ¡çš„ä¾èµ–æ ‘6              |
| **ç¯å¢ƒå˜é‡** | `systemctl show-environment`              | æŸ¥çœ‹ `systemd` ç¯å¢ƒå˜é‡3   |

------

### ğŸ› ï¸ **äº”ã€é«˜çº§è°ƒè¯•æŠ€å·§**

1. **æµ‹è¯•æœåŠ¡å¯åŠ¨è¿‡ç¨‹**ï¼š

   ```
   systemd-analyze verify nginx.service  # æ£€æŸ¥å•å…ƒæ–‡ä»¶è¯­æ³•
   ```

2. **åˆ†æå¯åŠ¨æ€§èƒ½**ï¼š

   ```
   systemd-analyze blame                 # æŒ‰è€—æ—¶æ’åºæœåŠ¡å¯åŠ¨æ—¶é—´:cite[1]
   systemd-analyze critical-chain nginx  # æŸ¥çœ‹æœåŠ¡å¯åŠ¨å…³é”®è·¯å¾„:cite[1]
   ```

3. **ä¸´æ—¶ä¿®æ”¹å¯åŠ¨å‚æ•°**ï¼š

   ```
   sudo systemctl edit nginx.service     # åˆ›å»ºè¦†ç›–æ–‡ä»¶ï¼ˆå­˜äº `/etc/systemd/system/`ï¼‰:cite[1]
   ```

------

### ğŸ’ **æ€»ç»“ï¼šé«˜æ•ˆæ’æŸ¥æµç¨‹**

1. **å®šä½æœåŠ¡** â†’ `systemctl list-units --type=service | grep <å…³é”®è¯>`
2. **æŸ¥çœ‹é…ç½®** â†’ `systemctl cat <æœåŠ¡å>.service`
3. **æ£€æŸ¥çŠ¶æ€** â†’ `systemctl status -l <æœåŠ¡å>`æ˜¾ç¤ºæ—¥å¿—æ—¶æ¢è¡Œ
4. **åˆ†ææ—¥å¿—** â†’ `journalctl -u <æœåŠ¡å> -xe`
5. **ä¾èµ–æ£€æŸ¥** â†’ `systemctl list-dependencies <æœåŠ¡å>`

> ğŸ’¡ **æç¤º**ï¼šæ‰€æœ‰ `journalctl` æ—¥å¿—ç”± `systemd-journald` ç»Ÿä¸€ç®¡ç†ï¼Œæ— éœ€é¢å¤–é…ç½® `syslog` 8ã€‚è‹¥éœ€æŒä¹…åŒ–å­˜å‚¨æ—¥å¿—ï¼Œå¯é…ç½® `/etc/systemd/journald.conf` ä¸­çš„ `Storage=persistent`ã€‚